var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=p.map,q=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,p.nodeIdCompat&&t.test(a[g])&&(a[g]=a[g].replace(t,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||q)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function d(b,c){return function(){var d=s.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),k.apply(a,d.concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice,t=/\.js$/;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[],v=typeof h;if(i=i||c,"undefined"===v||"function"===v){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h?h.apply(n[c],u):void 0,c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){if("string"==typeof b)return m[b]?m[b](c):g(l(b,c).f);if(!b.splice){if(p=b,p.deps&&k(p.deps,p.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k},k.config=function(a){return k(a)},requirejs._defined=n,define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||b(o,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("lib/almond",function(){}),!function(a,b){"function"==typeof define&&define.amd?define("xclass",b):a.Class=b()}(this,function(){var a=function(a){return!!a&&("[object Arguments]"===a.toString()||"object"==typeof a&&null!==a&&"length"in a&&"callee"in a)},b=function(){var a,b,c=-1;return"Microsoft Internet Explorer"==navigator.appName&&(a=navigator.userAgent,b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=b.exec(a)&&(c=parseFloat(RegExp.$1))),c}(),c=document.documentMode,d=8===c,e="Internet Explorer "+b+" doesn't support Class function";if(~b&&8>b)throw Error(e);if(8>c)throw Error(e+'. Switch your "Document Mode" to "Standards"');var f=function(b){var c=i=b.constructor!==Object?b.constructor:function(){},e=b["extends"]=b["extends"]||b.extend,g=e&&e.prototype,h=b["implements"]=b["implements"]||b.implement,i=c,j={};if(delete b.extend,delete b.implement,g){for(var k in g)j[k]="function"==typeof g[k]?function(b){return function(c,d){return d=a(d)?d:Array.prototype.slice.call(arguments,1),b.apply(c,d)}}(g[k]):g[k];j.constructor=function(b){return function(c,d){return d=a(d)?d:Array.prototype.slice.call(arguments,1),b.apply(c,d)}}(g.constructor)}return d?(b.prototype=null,b.constructor=null,c=function(){if(this instanceof c){var a=new XDomainRequest;for(var b in c.prototype)"constructor"!==b&&(a[b]=c.prototype[b]);return a.hasOwnProperty=c.prototype.hasOwnProperty,i.apply(a,arguments),a}i.apply(this,arguments)},b.constructor=c,c.prototype=c.fn=b,c.parent=j,e&&f.IEInherits(c,e)):(b.constructor=c,c.prototype=c.fn=b,c.parent=j,e&&f.inherits(c,e)),h&&h.validate(c.prototype),c.same=function(){return function(){return c.apply(this,arguments)}},this instanceof f?new c:c};return f.inherits=function(a,b){var c=a.prototype,d=function(){};d.prototype=b.prototype,a.prototype=new d,a.prototype.constructor=a;for(var e in c)a.prototype[e]=c[e];"undefined"!=typeof Symbol&&c[Symbol.iterator]&&(a.prototype[Symbol.iterator]=c[Symbol.iterator]),a.prototype.instanceOf=function(a){return this instanceof a}},f.IEInherits=function(a,b){for(var c,d=a.prototype.hasOwnProperty,e=a.prototype.constructor,f=Object.prototype.hasOwnProperty;b;)c=c||b.prototype.hasOwnProperty,a.prototype=function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d}(b.prototype,a.prototype),b=b.prototype&&b.prototype["extends"]&&b.prototype["extends"].prototype;d!==f?a.prototype.hasOwnProperty=d:c!==f&&(a.prototype.hasOwnProperty=c),a.prototype.constructor=e,a.prototype.instanceOf=function(b){for(var c=a;c;){if(c===b)return!0;c=c.prototype["extends"]}return!1}},f.Interface=function g(a,b){var c,d={},e=function(a){return"object"==typeof a&&null!==a&&"length"in a};if(a instanceof g){for(var f in a.propsMap)d[f]=1;c=e(b)?b:[].slice.call(arguments,1)}else c=e(a)?a:arguments;for(f=0;f<c.length;f++)d[c[f]]=1;this.propsMap=d,this.validate=function(a){for(var b in this.propsMap)if("function"!=typeof a[b])throw Error('[Class.Interface] Method "'+b+'" is not implemented in '+(a.constructor.name||a.name||"given")+" prototype")}},f.isXDR=d,f}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/polyfills/addeventlistener",b):b()}(this,function(){!function(a,b,c,d){b[c]||(Element.prototype[c]=a[c]=b[c]=function(b,c,d){return(d=this).attachEvent("on"+b,function(b){var b=b||a.event;b.target=b.target||b.srcElement,b.preventDefault=b.preventDefault||function(){b.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){b.cancelBubble=!0},b.which=b.button?2===b.button?3:4===b.button?2:b.button:b.keyCode,c.call(d,b)})},Element.prototype[d]=a[d]=b[d]=function(a,b){return this.detachEvent("on"+a,b)})}(window,document,"addEventListener","removeEventListener")}),function(a,b){"function"==typeof define&&define.amd?define("balalaika",["matreshka_dir/polyfills/addeventlistener"],b):a.$b=b()}(this,function(){return function(a,b,c,d,e,f,g,h,i,j,k,l){return l=function(a,b){return new l.i(a,b)},l.i=function(d,e){c.push.apply(this,d?d.nodeType||d==a?[d]:""+d===d?/</.test(d)?((h=b.createElement(e||"div")).innerHTML=d,h.children):(e&&l(e)[0]||b).querySelectorAll(d):/f/.test(typeof d)?/c/.test(b.readyState)?d():l(b).on("DOMContentLoaded",d):d:c)},l.i[k="prototype"]=(l.extend=function(a){for(j=arguments,h=1;h<j.length;h++)if(k=j[h])for(i in k)a[i]=k[i];return a})(l.fn=l[k]=c,{on:function(a,b){return a=a.split(d),this.map(function(c){(d[h=a[0]+(c.b$=c.b$||++e)]=d[h]||[]).push([b,a[1]]),c["add"+f](a[0],b)}),this},off:function(a,b){return a=a.split(d),k="remove"+f,this.map(function(c){if(j=d[a[0]+c.b$],h=j&&j.length)for(;i=j[--h];)b&&b!=i[0]||a[1]&&a[1]!=i[1]||(c[k](a[0],i[0]),j.splice(h,1));else!a[1]&&c[k](a[0],b)}),this},is:function(a){return h=this[0],i=!!h&&(h.matches||h["webkit"+g]||h["moz"+g]||h["ms"+g]),!!i&&i.call(h,a)}}),l}(window,document,[],/\.(.+)/,0,"EventListener","MatchesSelector")}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/polyfills/classlist",b):b()}(this,function(){function a(a){this.el=a;for(var b=a.className.replace(/^\s+|\s+$/g,"").split(/\s+/),c=0;c<b.length;c++)f.call(this,b[c])}function b(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{get:c}):a.__defineGetter__(b,c)}var c=function(a,b){return"boolean"==typeof b?this[b?"add":"remove"](a):this[this.contains(a)?"remove":"add"](a),this.contains(a)};if(window.DOMTokenList){var d=document.createElement("a");d.classList.toggle("x",!1),d.className&&(window.DOMTokenList.prototype.toggle=c)}if(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var e=Array.prototype,f=e.push,g=e.splice,h=e.join;a.prototype={add:function(a){this.contains(a)||(f.call(this,a),this.el.className=this.toString())},contains:function(a){return-1!=this.el.className.indexOf(a)},item:function(a){return this[a]||null},remove:function(a){if(this.contains(a)){for(var b=0;b<this.length&&this[b]!=a;b++);g.call(this,b,1),this.el.className=this.toString()}},toString:function(){return h.call(this," ")},toggle:c},window.DOMTokenList=a,b(Element.prototype,"classList",function(){return new a(this)})}}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/balalaika-extended",["balalaika","matreshka_dir/polyfills/classlist"],b):b(a.$b)}(this,function(a){var b,c,d="classList";if(!a)throw new Error("Balalaika is missing");return b=a.fn.on,c=a.fn.off,a.extend(a.fn,{on:function(a,c){return a.split(/\s/).forEach(function(a){b.call(this,a,c)},this),this},off:function(a,b){return a.split(/\s/).forEach(function(a){c.call(this,a,b)},this),this},hasClass:function(a){return!!this[0]&&this[0][d].contains(a)},addClass:function(a){return this.forEach(function(b){var c=b[d];c.add.apply(c,a.split(/\s/))}),this},removeClass:function(a){return this.forEach(function(b){var c=b[d];c.remove.apply(c,a.split(/\s/))}),this},toggleClass:function(a,b){return this.forEach(function(c){var e=c[d];"boolean"!=typeof b&&(b=!e.contains(a)),e[b?"add":"remove"].apply(e,a.split(/\s/))}),this},add:function(b){var c=a(this),d=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c};b=a(b).slice(),[].push.apply(c,b);for(var e=c.length-b.length;e<c.length;e++)([].indexOf?c.indexOf(c[e]):d(c,c[e]))!==e&&c.splice(e--,1);return c},find:function(b){var c=a();return this.forEach(function(d){c=c.add(a(b,d))}),c}}),a.parseHTML=function(b){var c,d,e=document.createElement("div"),f={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_:[0,"",""]};for(b=b.replace(/^\s+|\s+$/g,""),f.optgroup=f.option,f.tbody=f.tfoot=f.colgroup=f.caption=f.thead,f.th=f.td,c=f[/<([\w:]+)/.exec(b)[1]]||f._,e.innerHTML=c[1]+b+c[2],d=c[0];d--;)e=e.children[0];return a(e.children)},a.create=function(b,c){var d,e,f=document.createElement(b);if(c)for(d in c)if("attributes"==d&&"object"==typeof c[d])for(e in c[d])c[d].hasOwnProperty(e)&&f.setAttribute(e,c[d][e]);else f[d]=f[d]&&"object"==typeof c?a.extend(f[d]||{},c[d]):c[d];return f},function(a,b,c,d,e,f){var g,h=a.createElement("div").children;try{[].push.apply([],h)}catch(i){g=!0}return g=g||"function"==typeof h||a.documentMode<9,g&&(f=b.i[d="prototype"],b.i=function(g,h){for(e=g?g&&g.nodeType||g==window?[g]:"string"==typeof g?/</.test(g)?((c=a.createElement("div")).innerHTML=g,c.children):(h&&b(h)[0]||a).querySelectorAll(g):!/f/.test(typeof g)||g[0]||g[0].nodeType?g:/c/.test(a.readyState)?g():!function i(b){/in/(a.readyState)?setTimeout(i,9,b):b()}(g):f,d=[],c=e?e.length:0;c--;d[c]=e[c]);f.push.apply(this,d)},b.i[d]=f,f.is=function(a){var b,c=this[0],d=c.parentNode.querySelectorAll(a);for(b=0;b<d.length;b++)if(d[b]===c)return!0;return!1}),b}(document,a),a}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/dollar-lib",["matreshka_dir/balalaika-extended"],b):a.__DOLLAR_LIB=b(a.$b)}(this,function(a){var b,c="on off is hasClass addClass removeClass toggleClass add find".split(/\s+/),d="function"==typeof $?$:null,e=!0;if(d){for(b=0;b<c.length;b++)if(!d.prototype[c[b]]){e=!1;break}d.parseHTML||(e=!1)}else e=!1;return e?d:a}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/binders",b):a.__MK_BINDERS=b()}(this,function(){var a,b=function(a){return{on:null,getValue:null,setValue:a}};return a={innerHTML:function(){return b(function(a){this.innerHTML=null===a?"":a+""})},className:function(a){var c=!a.indexOf("!");return c&&(a=a.replace("!","")),b(function(b){this.classList.toggle(a,c?!b:!!b)})},property:function(a){return b(function(b){this[a]=b})},attribute:function(a){return b(function(b){this.setAttribute(a,b)})},textarea:function(){return a.input("text")},input:function(a){var b;switch(a){case"checkbox":return{on:"click keyup",getValue:function(){return this.checked},setValue:function(a){this.checked=a}};case"radio":return{on:"click keyup",getValue:function(){return this.value},setValue:function(a){this.checked=this.value==a}};case"submit":case"button":case"image":case"reset":return{};case"hidden":b="";break;case"text":case"email":case"password":case"tel":case"url":b="keyup paste";break;case"search":b="input paste";break;case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":case"file":case"range":case"color":b="change";break;default:b="keyup paste change"}return{on:b,getValue:function(){return this.value},setValue:function(a){this.value!=a&&(this.value=a)}}},select:function(a){var b;return a?{on:"change",getValue:function(){return slice.call(this.options).filter(function(a){return a.selected}).map(function(a){return a.value})},setValue:function(a){for(a="string"==typeof a?[a]:a,b=this.options.length-1;b>=0;b--)this.options[b].selected=~a.indexOf(this.options[b].value)}}:{on:"change",getValue:function(){return this.value},setValue:function(a){if(this.value=a,!a)for(b=this.options.length-1;b>=0;b--)this.options[b].value||(this.options[b].selected=!0)}}},visibility:function(a){return a="undefined"==typeof a?!0:a,b(function(b){this.style.display=a?b?"":"none":b?"none":""})}}}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/matreshka-core",["xclass","balalaika","matreshka_dir/dollar-lib","matreshka_dir/binders"],b):a.MK=a.Matreshka=b(a.Class,a.$b,a.__DOLLAR_LIB,a.__MK_BINDERS)}(this,function(a,b,c,d){if(!a)throw Error("Class function is missing");if(![].forEach)throw Error("If you're using Internet Explorer 8 you should use es5-shim: https://github.com/kriskowal/es5-shim");var e="v0.3-rc.37",f={list:{},add:function(a){a.node&&("function"==typeof a.on?a.on.call(a.node,a.handler):c(a.node).on(a.on.split(/\s/).join(".mk ")+".mk",a.handler)),(this.list[a.instance.__id]=this.list[a.instance.__id]||[]).push(a)},rem:function(a){var b,d,e=this.list[a.instance.__id];if(e)for(d=0;d<e.length;d++)b=e[d],b.node===a.node&&(b.mkHandler&&a.instance.off("_runbindings:"+a.key,b.mkHandler),c(a.node).off(b.on+".mk",b.handler),this.list[a.instance.__id].splice(d--,1))}},g=[].slice,h=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},i=function(a,b){throw Error("Method Matreshka"+a+" is deprecated. "+(b?" Please use Matreshka"+b+" instead.":""))},j=function(a,b){var d,e,f,g=c();return b.replace(/:sandbox/g,":bound(sandbox)").split(",").forEach(function(b){(d=/:bound\(([^(]*)\)(.*)/.exec(h(b)))?(e=a.$bound(d[1]),(f=h(d[2]))?0==f.indexOf(">")?m(e,function(a){var b=k.randomString();a.setAttribute(b,b),g=g.add(c("["+b+'="'+b+'"]'+f,a)),a.removeAttribute(b)}):g=g.add(e.find(f)):g=g.add(e)):g=g.add(b)}),g},k=a({isMK:!0,isMKInitialized:!1,on:function(a,b,c,d,e){if(!b)throw Error('callback is not function for event(s) "'+a+'"');var f,g,i=this._initMK();for(a=a instanceof Array?a:h(a).replace(/\s+/g," ").split(/\s(?![^(]*\))/g),"boolean"!=typeof c&&"undefined"!=typeof c&&(f=d,d=c,c=f),g=0;g<a.length;g++)i._on(a[g],b,d,e);return c===!0&&b.call(d||i,{triggeredOnInit:!0}),i},onDebounce:function(a,b,c,d,e,f){var g;return"number"!=typeof c&&(f=e,e=d,d=c,c=0),g=k.debounce(b,c),g._callback=b,this.on(a,g,d,e,f)},_on:function(a,b,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=a.indexOf("@"),s=this._initMK(),t=d||s,u=/^(.*?)\((.*)\)/;if(~r)k=a.slice(0,r),a=a.slice(r+1),l=function(c){var e,f=s[k];f&&f.isMK&&(e=function(a){a&&a["private"]||b.apply(this,arguments)},e._callback=b,f.on(a,e,t)),c&&c.previousValue&&c.previousValue.isMK&&c.previousValue.off(a,b,d)},l._callback=b,s.on("change:"+k,l,!0,s,a);else{if(~a.indexOf("_this_"))throw Error('Wrong event name "'+a+'. "_this_" key is deprecated');if(a=a.replace("::(","::sandbox("),f=a.replace(/\(.+\)/,""),i=s.__events[f]||(s.__events[f]=[]),j={callback:b,context:d,ctx:t,xtra:e},"bind:__this__"==a||"bind:_this_"==a||"bind:#this"==a)throw Error('"'+a+'" event name is deprecated');i.some(function(a){return a.callback==j.callback&&a.callback._callback==j.callback&&a.context==j.context})||(i.push(j),a.indexOf("change:")||s.makeSpecial(a.replace("change:","")),p=a.split("::"),q=p[0],k=p[1],k&&((h=u.exec(k))&&(g=j.selector=h[2],k=h[1]),o=function(a){var d,e,f=this,h=c(f),i=function(){b.call(t,{self:s,node:f,$nodes:h,key:k,domEvent:a,preventDefault:function(){a.preventDefault()},stopPropagation:function(){a.stopPropagation()},which:a.which,target:a.target})};g?(e="x"+String(Math.random()).split(".")[1],f.setAttribute(e,e),d="["+e+'="'+e+'"] '+g,c(a.target).is(d+","+d+" *")&&i(),f.removeAttribute(e)):i()},m=function(a){var b=a&&a.$nodes||s.__special[k]&&s.__special[k].$nodes,c=q+"."+s.__id+k;b&&b.on(c,o)},n=function(a){a.$nodes&&a.$nodes.off(q+"."+s.__id+k,o)},m._callback=n._callback=b,s._on("bind:"+k,m),m(),s._on("unbind:"+k,n)))}return s},once:function(a,b,c){if(!b)throw Error('callback is not function for event "'+a+'"');var d,e=this._initMK();for(a=a.split(/\s/),d=0;d<a.length;d++)!function(a){var d=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}(b);d._callback=b,e.on(a,d,c)}(a[d]);return this},off:function(a,b,c){var d,e=this._initMK();if(!a&&!b&&!c)return e.events={},e;for(a=h(a).replace(/\s+/g," ").split(/\s(?![^(]*\))/g),d=0;d<a.length;d++)e._off(a[d],b,c);return e},_off:function(a,b,c){var d,e,f,g,h,i,j,k,l,m=a.indexOf("@"),n=this._initMK(),o=/^(.*?)\((.*)\)/;if(~m){if(i=a.slice(0,m),a=a.slice(m+1),b)n.off("change:"+i,b,c);else for(h=n.__events["change:"+i]||[],l=0;l<h.length;l++)h[l].xtra===a&&n.off("change:"+i,h[l].callback);n[i]&&n[i].isMK&&n[i].off(a,b,c)}else if(h=n.__events[a]){if(n.__events[a]=f=[],b||c)for(l=0;l<h.length;l++)g=h[l],(b&&b!==g.callback&&b!==g.callback._callback||c&&c!==g.context)&&f.push(g);f.length||delete n.__events[a],j=a.split("::"),k=j[0],i=j[1],i&&n.__special[i]&&((e=o.exec(i))&&(d=g.selector=e[2],i=e[1]),n.__special[i].$nodes.off(k+"."+n.__id+i),n.off("bind:"+i,b),n.off("unbind:"+i,b))}return n},trigger:function(a){var b,c,d=this._initMK();if(a)for(b=g.call(arguments),a=a.split(/\s/),c=0;c<a.length;c++)b=b.slice(),b[0]=a[c],d._trigger.apply(d,b);return d},_trigger:function(a){var b,c,d=this._initMK(),e=d.__events[a];return a&&e&&(b=g.call(arguments,1),(c=function(a,b){for(var c,d=-1,e=a.length;++d<e;)(c=a[d]).callback.apply(c.ctx,b||[])})(e,b)),d},bindNode:function(a,b,c,d,e){var g,h,i,j,m=this._initMK(),n="undefined"==typeof m[a];if(m.eq(a))throw Error('"this" argument for bindNode is deprecated');if("__this__"==a||"_this_"==a||"#this"==a)throw Error('Use "sandbox" key instead of "'+a+'" which is deprecated');if(a instanceof Array){for(i=0;i<a.length;i++)m.bindNode(a[i][0],a[i][1],a[i][2]||d,b);return m}if("string"==typeof a&&(h=a.split(/\s/),h.length>1)){for(i=0;i<h.length;i++)m.bindNode(h[i],b,c,d);return m}if("object"==typeof a){for(i in a)a.hasOwnProperty(i)&&m.bindNode(i,a[i],b,c,d);return m}if(d=d||{},j=m.makeSpecial(a),g=m._getNodes(b),!g.length){if(e)return m;throw Error('Missed bound element for key "'+a+'"')}return j.$nodes=j.$nodes.add(g),"sandbox"==a&&(m.$sandbox=j.$nodes,m.sandbox=j.$nodes[0]),k.each(g,function(b){var e,h=null!==c?l("sandbox"==a?{}:k.lookForBinder(b)||{},c):{},i={self:m,key:a,$nodes:g,node:b};h.initialize&&h.initialize.call(b,l({value:j.value},i)),h.setValue&&(e=function(c){var d=m[a];(c.changedNode!=b||c.onChangeValue!==d)&&h.setValue.call(b,d,l({value:d},i))},m.on("_runbindings:"+a,e,!n)),n&&h.getValue&&d.assignDefaultValue!==!1&&m.set(a,h.getValue.call(b,i),l({fromNode:!0},d)),h.getValue&&h.on&&f.add({node:b,on:h.on,instance:m,key:a,mkHandler:e,handler:function(c){var d=m[a],e=h.getValue.call(b,l({value:d,domEvent:c,preventDefault:function(){c.preventDefault()},stopPropagation:function(){c.stopPropagation()},which:c.which,target:c.target},i));e!==d&&m.set(a,e,{fromNode:!0,changedNode:b,onChangeValue:e})}})}),d.silent||m._trigger("bind:"+a,l({key:a,$nodes:g,node:g[0]||null},d)),m},bindOptionalNode:function(a,b,c,d){var e=this;return"object"==typeof a?e.bindNode(a,b,c,!0):e.bindNode(a,b,c,d,!0),e},bindElement:function(){i("#bindElement","#bindNode")},unbindNode:function(a,b,c){var d,e,g,h=this._initMK(),i=typeof a;if(h.eq(a))throw Error('"this" argument for bindNode is deprecated');if(a instanceof Array){for(g=0;g<a.length;g++)c=b,h.unbindNode(a[g][0],a[g][1]||c,c);return h}if("string"==i&&(e=a.split(/\s/),e.length>1)){for(g=0;g<e.length;g++)h.unbindNode(e[g],b,c);return h}if("object"==i&&null!==a){for(g in a)a.hasOwnProperty(g)&&h.unbindNode(g,a[g],b);return h}if(null===a){for(a in h.__special)h.__special.hasOwnProperty(a)&&h.unbindNode(a,b,c);return h}return b?(d=h._getNodes(b),k.each(d,function(a){f.rem({node:a,instance:h})},h),c&&c.silent||h._trigger("unbind:"+a,l({key:a,$nodes:d,node:d[0]||null},c)),h):h.__special[a]&&h.__special[a].$nodes?h.unbindNode(a,h.__special[a].$nodes,c):h},unbindElement:function(){i("#unbindElement","#unbindNode")},boundAll:function(a){var b,d,e,f=this._initMK(),g=f.__special;if("object"==typeof a)throw Error('"object" argument for #boundAll and #$bound is deprecated');if(a=a?a:"sandbox",b="string"==typeof a?a.split(/\s/):a,b.length<=1)return b[0]in g?g[b[0]].$nodes:c();for(d=c(),e=0;e<b.length;e++)d=d.add(g[b[e]].$nodes);return d},$bound:function(a){return this.boundAll(a)},bound:function(a){var b,c,d=this._initMK(),e=d.__special;if("object"==typeof a)throw Error('"object" argument for #bound is deprecated');if(a=a?a:"sandbox",b="string"==typeof a?a.split(/\s/):a,b.length<=1)return b[0]in e?e[b[0]].$nodes[0]||null:null;for(c=0;c<b.length;c++)if(b[c]in e&&e[b[c]].$nodes.length)return e[b[c]].$nodes[0];return null},$el:function(){i("#$el","#boundAll")},el:function(){i("#el","#bound")},selectAll:function(a){var b=this._initMK();return/:sandbox|:bound\(([^(]*)\)/.test(a)?j(b,a):b.$bound("sandbox").find(a)},$:function(a){return this.selectAll(a)},select:function(a){return this.selectAll(a)[0]||null},_getNodes:function(a){return"string"==typeof a&&!/</.test(a)&&/:sandbox|:bound\(([^(]*)\)/.test(a)?j(this._initMK(),a):c(a)},makeSpecial:function(a){var b=this._initMK(),d=b.__special[a];return d||(d=b.__special[a]={$nodes:c(),value:b[a],getter:function(){return d.value},setter:function(c){b.set(a,c,{fromSetter:!0})},mediator:null},Object.defineProperty(b,a,{configurable:!0,get:function(){return d.getter.call(b)},set:function(a){d.setter.call(b,a)}})),d},eq:function(a){return"object"==typeof a&&null!==a&&this.__id==a.__id},defineGetter:function(a,b){var c,d,e=this._initMK();if("object"==typeof a){for(d in a)a.hasOwnProperty(d)&&e.defineGetter(d,a[d]);return e}return c=e.makeSpecial(a),c.getter=function(){return b.call(e,{value:c.value,key:a,self:e})},e},defineSetter:function(a,b){var c,d=this._initMK();if("object"==typeof a){for(c in a)a.hasOwnProperty(c)&&d.defineSetter(c,a[c]);return d}return d.makeSpecial(a).setter=function(c){return b.call(d,c,{value:c,key:a,self:d})},d},mediate:function(a,b){var c,d,e=this._initMK(),f=typeof a;if("object"==f&&!(a instanceof Array)){for(c in a)a.hasOwnProperty(c)&&e.mediate(c,a[c]);return e}for(a="string"==f?a.split(/\s/):a,c=0;c<a.length;c++)(function(a){d=e.makeSpecial(a),d.mediator=function(c){return b.call(e,c,d.value,a,e)},e.set(a,d.mediator(d.value),{fromMediator:!0})})(a[c]);return e},setMediator:function(){i("#setMediator","#mediate")},linkProps:function(a,b,c,d){var e,f,g,h,i,b="string"==typeof b?b.split(/\s/):b,j=function(d){var j=[],m=d._protect=d._protect||d.key+this.__id;if(m!==a+k.__id){if("object"==typeof b[0])for(h=0;h<b.length;h+=2)for(e=b[h],g="string"==typeof b[h+1]?b[h+1].split(/\s/):b[h+1],i=0;i<g.length;i++)j.push(e[g[i]]);else for(h=0;h<b.length;h++)f=b[h],e=k,j.push(e[f]);k.set(a,c.apply(k,j),l({},d,{fromDependency:!0}))}},k=this._initMK();if(c=c||function(a){return a},"object"==typeof b[0])for(h=0;h<b.length;h+=2)for(e=b[h]._initMK(),g="string"==typeof b[h+1]?b[h+1].split(/\s/):b[h+1],i=0;i<g.length;i++)e.makeSpecial(g[i]),e.on("_rundependencies:"+g[i],j);else for(h=0;h<b.length;h++)f=b[h],e=this,e.makeSpecial(f),e.on("_rundependencies:"+f,j);return d!==!1&&j.call("object"==typeof b[0]?b[0]:this,{key:"object"==typeof b[0]?b[1]:b[0]}),this},addDependency:function(){i("#addDependency","#linkProps")},addDependence:function(){i("#addDependence","#linkProps")},get:function(a){return this[a]},set:function(a,b,c){var d,e,f,g,h=this,i=typeof a,j=Number.isNaN||function(a){return"number"==typeof a&&j(a)};if("undefined"==i)return h;if("object"==i){for(g in a)a.hasOwnProperty(g)&&h.set(g,a[g],b);return h}return h.__special&&h.__special[a]?(d=h.__special[a],e=d.value,c=c||{},f=!d.mediator||b===e||c.skipMediator||c.fromMediator?b:d.mediator.call(h,b,e,a,h),d.value=f,(f!==e||c.force||c.forceHTML||f!==b&&!j(f))&&(c=l({},c,{value:f,previousValue:e,key:a,node:d.$nodes[0]||null,$nodes:d.$nodes,self:h}),c.silentHTML||h._trigger("_runbindings:"+a,c)),f===e&&!c.force||c.silent||h._trigger("change:"+a,c)._trigger("change",c),f===e&&!c.force&&!c.forceHTML||c.skipLinks||h._trigger("_rundependencies:"+a,c),h):(h[a]=b,h)},remove:function(a,b){var c,d,e=this._initMK(),f=String(a).split(/\s/);for(b=l({keys:f},b),d=0;d<f.length;d++)if(c=f[d]in e){b.key=f[d],b.value=e[f[d]],e.unbindNode(f[d]).off("change:"+f[d]),delete e.__special[f[d]];try{delete e[f[d]]}catch(g){}b&&b.silent||e._trigger("delete",b)._trigger("delete:"+f[d],b)}return e},define:function(a,b){var c=this;if("object"==typeof a){for(var d in a)c.define(d,a[d]);return c}return Object.defineProperty(c,a,b),c},delay:function(a,b,c){var d=this;return"object"==typeof b&&(c=b,b=0),setTimeout(function(){a.call(c||d)},b||0),d},initMK:function(){i("#initMK")},_parseBindings:function(a){var b=this._initMK(),d="string"==typeof a?k.$.parseHTML(a.replace(/^\s+|\s+$/g,"")):c(a),e=d.find("*").add(d);return k.each(e,function(a){!function b(a){"TEXTAREA"!==a.tagName&&k.each(a.childNodes,function(c){var d,e=c.previousSibling;3==c.nodeType&&~c.nodeValue.indexOf("{{")?(d=c.nodeValue.replace(/{{([^}]*)}}/g,'<mk-bind mk-html="$1"></mk-bind>'),e?e.insertAdjacentHTML("afterend",d):a.insertAdjacentHTML("afterbegin",d),a.removeChild(c)):1==c.nodeType&&b(c)})}(a)}),e=d.find("*").add(d),k.each(e,function(a){var c=a.getAttribute("mk-html");c&&(b.bindNode(c,a,k.binders.innerHTML()),a.removeAttribute("mk-html")),k.each(a.attributes,function(c){var d,e,f=h(c.value),g=c.name;~f.indexOf("{{")&&(d=f.match(/{{[^}]*}}/g).map(function(a){return a.replace(/{{(.*)}}/,"$1")}),1==d.length&&/^{{[^}]*}}$/g.test(f)?e=d[0]:(e=k.randomString(),b.linkProps(e,d,function(){var a=f;return d.forEach(function(c){a=a.replace(new RegExp("{{"+c+"}}","g"),b[c])}),a})),("value"==g&&"checkbox"!=a.type||"checked"==g&&"checkbox"==a.type)&&k.lookForBinder(a)?b.bindNode(e,a):b.bindNode(e,a,k.binders.attribute(g)))})},b),d},_initMK:function(){var a=this;return a.isMKInitialized||l(a,{isMKInitialized:!0,Matreshka:k,sandbox:a,__id:"mk"+k.randomString(),__events:{},__special:{}}),a},toString:function(){return"[object Matreshka]"},constructor:function(){this._initMK()}}),l=k.extend=function(a,b){var c,d;if(a)for(c=1;c<arguments.length;c++)if(b=arguments[c])for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a},m=k.each=function(a,b,c){if(a){if("length"in a)[].forEach.call(a,b,c);else for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}};return l(k,{binders:d,throwDeprecated:i,version:e,Class:a,$:c,$b:b,useAs$:function(a){return k.$=c=a},useBalalaika:function(){i(".useBalalaika",".useAsDOMLib")},usejQuery:function(){i(".usejQuery",".useAsDOMLib")},isXDR:a.isXDR,defaultBinders:k.elementProcessors=[],htmlp:{setValue:function(){i(".htmlp",".binders.innerHTML")}},classp:function(){i(".classp",".binders.className")},noop:function(){},procrastinate:function(){i("MK.procrastinate","MK.debounce")},debounce:function(a,b,c){var d;return"number"!=typeof b&&(c=b,b=0),function(){var e=arguments,f=this;clearTimeout(d),d=setTimeout(function(){a.apply(c||f,e)},b||0)}},randomString:function(){return((new Date).getTime()-new Date(2013,4,3).getTime()).toString(36)+Math.floor(1679616*Math.random()).toString(36)},lookForBinder:function(a){var b,c,d=k.defaultBinders;for(c=0;c<d.length;c++)if(b=d[c].call(a,a))return b}}),k.defaultBinders.push(function(a){var b;return"INPUT"==a.tagName?b=d.input(a.type):"TEXTAREA"==a.tagName?b=d.textarea():"SELECT"==a.tagName&&(b=d.select(a.multiple)),b}),k}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/matreshka-object",["matreshka_dir/matreshka-core"],b):b(a.MK)}(this,function(a){if(!a)throw new Error("Matreshka is missing");var b,c=function(b,c){a.throwDeprecated(".Object"+b,".Object"+c)},d={"extends":a,isMKObject:!0,renderer:null,constructor:function(a){this.jset(a)},keys:function(){var a,b=this,c=[];for(a in b._keys)b._keys.hasOwnProperty(a)&&c.push(a);return c},_initMK:function(){var b=this;return b.isMKInitialized?b:(a.Object.parent._initMK(b,arguments),b.set("_keys",{})._on("delete",function(a){a&&a.silent||b._trigger("modify",a)})._on("change",function(a){a&&a.key in b._keys&&!a.silent&&b._trigger("modify",a)}))},_on:function(b,c,d,e){var f,g=this._initMK();return 0==b.indexOf("@")?(b=b.slice(1),f=function(a){var e=g[a.key];e&&e.isMK&&a&&a.key in g._keys&&e._on(b,c,d||g)},g.each(function(a){a&&a.isMK&&a._on(b,c,d||g)},g),f._callback=c,g._on("change",f,g,b)):a.prototype._on.call(g,b,c,d,e),this},_off:function(b,c,d){var e=this._initMK();if(0==b.indexOf("@")){if(b=b.slice(1),c)e.off("change",c,d);else{events=e.__events.change||[];for(var f=0;f<events.length;f++)events[f].xtra==b&&e.off("change",events[f].callback)}e.each(function(a){a.isMK&&a.off(b,c,d)},e)}else a.prototype._off.call(e,b,c,d);return this},hasOwnProperty:function(a){return this._initMK()._keys.hasOwnProperty(a)},toObject:function(){var a,b=this._initMK(),c={},d=b._keys;for(a in d)d.hasOwnProperty(a)&&(c[a]=b[a]);return c},toNative:function(){return this.toObject()},toJSON:function(){var a=this._initMK(),b={},c=a._keys;for(var d in c)c.hasOwnProperty(d)&&(b[d]=a[d]&&a[d].toJSON?a[d].toJSON():a[d]);return b},keyOf:function(a){var b,c=this._initMK(),d=c._keys;for(b in d)if(d.hasOwnProperty(b))if(a&&a.isMK){if(a.eq(c[b]))return b}else if(a===c[b])return b;return null},jset:function(a,c,d){var e=this._initMK(),f=typeof a;if("undefined"==f)return e;if("object"==f){a=a.toJSON?a.toJSON():a;for(b in a)e.jset(b,a[b],c);return e}return e._keys[a]=1,e.makeSpecial(a),e.set(a,c,d)},remove:function(b,c){return this.removeDataKeys(b),a.Object.parent.remove(this,b,c)},addDataKeys:function(a){var c=this._initMK();if(!arguments.length)return c;for(a=arguments.length>1?arguments:a instanceof Array?a:String(a).split(/\s/),b=0;b<a.length;b++)c._keys[a[b]]=1,c.makeSpecial(a[b]);return c},addJSONKeys:function(){c("#addJSONKeys","#addDataKeys")},removeDataKeys:function(a){var c=this._initMK();if(!arguments.length)return c;for(a=arguments.length>1?arguments:a instanceof Array?a:String(a).split(/\s/),b=0;b<a.length;b++)delete c._keys[a[b]];return c},removeJSONKeys:function(){c("#removeJSONKeys","#removeDataKeys")},each:function(a,b){var c,d=this._initMK();for(c in d._keys)d._keys.hasOwnProperty(c)&&a.call(b,d[c],c,d);return d}};return d["undefined"!=typeof Symbol?Symbol.iterator:"@@iterator"]=function(){var a=this,b=a.keys(),c=0;return{next:function(){return c>b.length-1?{done:!0}:{done:!1,value:a[b[c++]]}
}}},a.Object=a.Class(d)}),function(a,b){"function"==typeof define&&define.amd?define("matreshka_dir/matreshka-array",["matreshka_dir/matreshka-core"],b):b(a.MK)}(this,function(a){if(!a)throw new Error("Matreshka is missing");var b=Array.prototype,c=b.slice,d=1,e=2,f=3,g=4,h=5,i=6,j={silent:!0,dontRender:!0,skipMediator:!0},k=function(b,c){a.throwDeprecated(".Array"+b,".Array"+c)},l=function(a,b){return function(){k(a,b)}},m=function(a,b){if(a.length!=b.length)return!1;for(var c=0,d=a.length;d>c;c++)if(a[c]&&a[c].isMK&&a[c].eq(b[c])||a[c]!==b[c])return!1;return!0},n=a.isXDR?function(a){var b,c,d=this,e=a&&a.isMK;for(b=0;b<d.length;b++)if(c=d[b],e?a.eq(c):a===c)return b;return-1}:b.indexOf,o=a.isXDR?function(a){var b,c,d=this,e=a&&a.isMK;for(b=d.length-1;b>=0;b--)if(c=d[b],e?a.eq(c):a===c)return b;return-1}:b.lastIndexOf,p=function(k,l,n){var o;return k==d?function(){return b[l].apply(this.toArray(),arguments),this}:k==e?function(){return(new a.Array).recreate(b[l].apply(this.toArray(),arguments),j)}:k==f?function(){return b[l].apply(this.toArray(),arguments)}:k==g?function(){var d=this,e=arguments,f=c.call(e,n?-1:0),g=n?e[e.length-1]||{}:{},h=d.toArray(),i=b[l].apply(h,f);return m(d,h)||(d.recreate(h,j),g=a.extend({returns:i,args:f,originalArgs:c.call(e),method:l,self:d},g),g.silent||d._trigger(l,g),g.dontRender||d.processRendering(g)),d}:k==h?function(){var d,e=this,f=arguments,g=c.call(f,0,n?-1:f.length),h=n?f[f.length-1]||{}:{},i=e.toArray();if(!h.skipMediator&&"function"==typeof e._itemMediator&&("unshift"==l||"push"==l))for(o=0;o<g.length;o++)g[o]=e._itemMediator.call(e,g[o],o);return d=b[l].apply(i,g),m(e,i)||(e.recreate(i,j),h=a.extend({returns:d,args:g,originalArgs:c.call(f),method:l,self:e},h),h.silent||e._trigger(l,h),h.dontRender||e.processRendering(h)),d}:k==i?function(){var d,e=this,f=arguments,g=c.call(f,n?-1:0),h=n?f[f.length-1]||{}:{},i=e.toArray();if(!h.skipMediator&&"function"==typeof e._itemMediator)for(o=2;o<g.length;o++)g[o]=e._itemMediator.call(v,g[o],o);return d=b[l].apply(i,g),m(e,i)||(e.recreate(i,j),h=a.extend({returns:d,args:g,originalArgs:c.call(f),method:l,self:e},h),h.silent||e._trigger(l,h),h.dontRender||e.processRendering(h)),(new a.Array).recreate(d,j)}:void 0},q={"extends":a,isMKArray:!0,length:0,itemRenderer:null,renderIfPossible:!0,useBindingsParser:!1,Model:null,constructor:function(a){var b,c=this._initMK(),d=arguments.length;if(1==d&&"number"==typeof a)c.length=a;else{for(b=0;d>b;b++)c[b]=arguments[b];c.length=arguments.length}},mediateItem:function(a){var b,c=this;for(c._itemMediator=a,b=0;b<c.length;b++)c[b]=a.call(c,c[b],b);return c},setItemMediator:function(){k("#setItemMediator","#mediateItem")},_on:function(b,c,d,e){var f,g=this._initMK();return 0==b.indexOf("@")?(b=b.slice(1),f=function(a){(a&&a.added?a.added:g).forEach(function(a){a&&a.isMK&&a._on(b,c,d||g)})},f._callback=c,g._on("add",f,g,b),f.call(d||g)):a.prototype._on.call(g,b,c,d,e),this},_off:function(b,c,d){var e,f,g=this._initMK();if(0==b.indexOf("@")){if(b=b.slice(1),c)g.off("add",c,d);else for(e=g.__events.add||[],f=0;f<e.length;f++)e[f].xtra==b&&g.off("add",e[f].callback);g.forEach(function(a){a.isMK&&a.off(b,c,d)},g)}else a.prototype._off.call(g,b,c,d);return this},createFrom:function(){k("#createFrom","#recreate")},silentCreateFrom:function(){k("#silentCreateFrom","#recreate")},recreate:function(b,c){b=b||[];var d,e,f,g,h,i=this,j=i.length-b.length,k=i.toNative();if(c=c||{},i._itemMediator&&!c.skipMediator){for(d=[],e=0;e<b.length;e++)d[e]=i._itemMediator.call(i,b[e],e);b=d}for(e=0;e<b.length;e++)i[e]=b[e];for(e=0;j>e;e++)i.remove(e+b.length,{silent:!0});return i.length=b.length,h=i.toNative(),g=k.length?k.filter(function(a){return!~n.call(h,a)}):[],f=h.length?h.filter(function(a){return!~n.call(k,a)}):[],c=a.extend({added:f,removed:g,was:k,now:h,method:"recreate",self:i},c),c.silent||(f.length&&i._trigger("add",c),g.length&&i._trigger("remove",c),(f.length||g.length)&&i._trigger("recreate",c)),c.dontRender||i.processRendering(c),i},toArray:function(){var a,b,d=this._initMK();try{return c.call(d)}catch(e){for(a=[],b=0;b<d.length;b++)a[b]=d[b];return a}},toNative:function(){return this.toArray()},_initMK:function(){var b=this;return b.isMKInitialized?b:a.prototype._initMK.call(b).on("change:Model",function(){var a=b.Model;a&&b.mediateItem(function(c){return c&&c.isMK&&c.instanceOf(a)?c:new a(c&&c.toJSON?c.toJSON():c,b)})},!0).on("pull pop shift splice",function(c){c&&c.returns&&("splice"==c.method?c.returns.length&&b._trigger("remove",a.extend({removed:c.returns},c)):b._trigger("remove",a.extend({removed:[c.returns]},c)))}).on("push unshift splice",function(d){var e;d&&d.args&&d.args.length&&("splice"==d.method?(e=c.call(d.args,2),e&&e.length&&b._trigger("add",a.extend({added:e},d))):b._trigger("add",a.extend({added:d.args},d)))}).on("add remove sort reverse",function(a){a.added=a.added||[],a.removed=a.removed||[],b._trigger("modify",a)}).on("add",function(a){var b=this,c=a&&a.added;c&&b.__events.addone&&c.forEach(function(a){b._trigger("addone",{self:b,added:a})})}).on("remove",function(a){var b=this,c=a&&a.removed;c&&b.__events.removeone&&c.forEach(function(a){b._trigger("removeone",{self:b,removed:a})})})},_renderOne:function(b){var c,d,e=this,f=e.__id,g=b.renderer||e.itemRenderer,h=g===b.renderer?b:e,i=b.bound(f);if(b[f]||(b[f]=e),!i){if("function"==typeof g&&(g=g.call(h,b)),"string"!=typeof g||~g.indexOf("<")||~g.indexOf("{{"))d=g;else{if(d=h._getNodes(g),!(d=d&&d[0]))throw Error("renderer node is missing: "+g);d=d.innerHTML}c=e.useBindingsParser?b._parseBindings(d):"string"==typeof d?a.$.parseHTML(d.replace(/^\s+|\s+$/g,"")):a.$(d),b&&b.isMK&&b.bindRenderedAsSandbox!==!1&&c.length&&b.bindNode("sandbox",c),b.bindNode(f,c),b._trigger("render",{node:c[0],$nodes:c,self:b,parentArray:e}),i=b.bound(f)}return i},processRendering:function(a){var b,c,d=this,e=d.__id,f=f=d.bound("container")||d.bound(),g=function(a){if(a&&a.isMK){var b=a.bound(e);return a.remove(e,{silent:!0}),b}},h=function(b){return b&&b.isMK&&d.renderIfPossible&&f&&(!a||!a.dontRender)&&(d.itemRenderer||b&&b.renderer)&&d._renderOne(b)};switch(a.method){case"push":for(c=d.length-a.args.length;c<d.length;c++)(b=h(d[c]))&&f.appendChild(b);break;case"pull":case"pop":case"shift":(b=g(a.returns))&&b.parentNode.removeChild(b);break;case"unshift":for(c=a.args.length-1;c+1;c--)(b=h(d[c]))&&(f.children?f.insertBefore(b,f.firstChild):f.appendChild(b));break;case"sort":case"reverse":for(c=0;c<d.length;c++)(b=d[c].bound(e))&&f.appendChild(b);break;case"rerender":for(c=0;c<d.length;c++)(b=h(d[c]))&&f.appendChild(b);break;case"splice":for(c=0;c<a.returns.length;c++)(b=g(a.returns[c]))&&b.parentNode.removeChild(b);for(c=0;c<d.length;c++)(b=h(d[c]))&&f.appendChild(b);break;case"recreate":for(c=0;c<a.removed.length;c++)(b=g(a.removed[c]))&&f.removeChild(b);for(c=0;c<d.length;c++)(b=h(d[c]))&&f.appendChild(b)}return d},rerender:function(){return this.processRendering({method:"rerender"})},hasOwnProperty:function(a){return"length"==a||a<this.length&&a>=0},toJSON:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]&&this[b].toJSON?this[b].toJSON():this[b]);return a},concat:function(){var b,c,d,e=arguments,f=this.toArray();for(c=0;c<e.length;c++)if(b=e[c],b instanceof Array||b&&b.instanceOf&&b.instanceOf(a.Array))for(d=0;d<b.length;d++)f.push(b[c]);return(new a.Array).recreate(f)},pull:function(b,c){var d,e=this,f=e.toArray(),g=b,h=typeof b;return"number"==h||"string"==h||(b=e.indexOf(b),~b)?(d=f.splice(b,1)[0]||null,m(f,e)||(c=c||{},e.recreate(f,j),c=a.extend({returns:d,args:[g],method:"pull",self:e},c),c.silent||e._trigger("pull",c),e.processRendering(c)),d):null},silentPull:l("silentPull","pull"),push:p(h,"push"),pop:p(h,"pop"),unshift:p(h,"unshift"),shift:p(h,"shift"),sort:p(g,"sort"),reverse:p(g,"reverse"),splice:p(i,"splice"),push_:p(h,"push",!0),pop_:p(h,"pop",!0),unshift_:p(h,"unshift",!0),shift_:p(h,"shift",!0),sort_:p(g,"sort",!0),reverse_:p(g,"reverse",!0),splice_:p(i,"splice",!0),silentPush:l("silentPush","push_"),silentPop:l("silentPop","pop_"),silentUnshift:l("silentUnshift","unshift_"),silentShift:l("silentShift","shift_"),silentSort:l("silentSort","sort_"),silentReverse:l("silentReverse","reverse_"),silentSplice:l("silentSplice","splice_"),map:p(e,"map"),filter:p(e,"filter"),slice:p(e,"slice"),every:p(f,"every"),some:p(f,"some"),reduce:p(f,"reduce"),reduceRight:p(f,"reduceRight"),forEach:p(d,"forEach"),each:p(d,"forEach"),toString:p(f,"toString"),join:p(f,"join"),indexOf:n,lastIndexOf:o};return q["undefined"!=typeof Symbol?Symbol.iterator:"@@iterator"]=function(){var a=this,b=0;return{next:function(){return b>a.length-1?{done:!0}:{done:!1,value:a[b++]}}}},a.Array=a.Class(q)}),"function"==typeof define&&define.amd&&define("matreshka",["matreshka_dir/matreshka-core","matreshka_dir/matreshka-object","matreshka_dir/matreshka-array"],function(a){return a}),"function"==typeof define&&define.amd?define("matreshka",["matreshka"],function(a){return a}):"object"==typeof exports&&(module.exports=Matreshka),define("app/article.class",["globals","matreshka","balalaika"],function(a,b,c){return b.Class({"extends":b.Object,constructor:function(d){this.set(d).bindNode("sandbox",'article[id="'+this.id+'"]').bindNode("menuItem",'nav a[href="#'+this.id+'"]').bindNode("isActive",":bound(menuItem)",b.binders.className("active")).bindNode("expanded",":bound(menuItem)",b.binders.className("expanded")).bindOptionalNode("submenu",'nav ul[data-submenu="'+this.id+'"]').bindOptionalNode("comment",":sandbox .comments").bindNode("pagination",this.bound().appendChild(c(a.app.select("#pagination-template").innerHTML)[0])).bindNode("name",":bound(menuItem)",{getValue:function(){return this.dataset.name||this.textContent}}).bindNode({nextId:":bound(pagination) .next-page",previousId:":bound(pagination) .previous-page"},{setValue:function(a){this.href="#"+a}}).bindNode({nextHeader:":bound(pagination) .next-page",previousHeader:":bound(pagination) .previous-page"},b.binders.innerHTML()).bindOptionalNode("header",":sandbox h2",{getValue:function(){return this.innerHTML.replace(/<wbr>/g,"")}}).on("click::menuItem(.expand)",function(a){this.expanded=!this.expanded,a.preventDefault()}).on("change:expanded",function(){var a=this.bound("submenu");a&&(this.expanded?(a.style.marginTop=0,a.style.display="block"):a.style.marginTop=-44*this.selectAll(":bound(submenu) a").length+"px")},!0).on("change:isActive",function(){for(var a=this.bound("menuItem");a=a.parentNode;){c(".submenu-wrapper").filter(function(b){return b.contains(a)}).map(function(a){return a.previousElementSibling}).map(function(a){return a.querySelector(".hidden-active-child")}).forEach(function(a){a.innerHTML=this.isActive?this.name:""},this);break}}).on("click::comment",function(){var d=document.location.origin+document.location.pathname+"#"+this.id,e="_"+this.id,f=a.app.bound("commentsBlock");return this.bound().contains(a.app.bound("commentsBlock"))?void((a.app.commentsShown=!a.app.commentsShown)&&setTimeout(function(){window.scrollTo(window.pageXOffset,f.offsetTop-60)},0)):(a.app.commentsShown=!0,this.bound().appendChild(a.app.bound("commentsBlock")),location.hash=this.id,window.DISQUS?DISQUS.reset({reload:!0,config:function(){this.page.identifier=e,this.page.url=e,this.page.title=title}}):(b.extend(window,{disqus_developer:1,disqus_identifier:e,disqus_title:this.bound("comment").dataset.title,disqus_url:d}),c("head")[0].appendChild(c.create("script",{async:!0,src:"//"+window.disqus_shortname+".disqus.com/embed.js"}))),void setTimeout(function(){window.scrollTo(window.pageXOffset,f.offsetTop-60)},500))}).linkProps("previousId","previous",function(a){return a?a.id:""}).linkProps("nextId","next",function(a){return a?a.id:""}).linkProps("previousHeader","previous",function(a){return a?a.name:""}).linkProps("nextHeader","next",function(a){return a?a.name:""})}})}),define("app/articles.class",["globals","matreshka","balalaika","app/article.class"],function(a,b,c,d){return b.Class({"extends":b.Array,Model:d,constructor:function(){c("article:not([data-typedef])").forEach(function(a){a.id&&this.push({id:a.id})},this),this.forEach(function(a,b){a.previous=this[b-1],a.next=this[b+1]},this),this.bindNode("header","header .inner",b.binders.innerHTML()).bindNode("win",window).on("hashchange::win",function(){for(var a,b=0;b<this.length;b++)if(this[b].id===location.hash.replace("#","")){a=this[b];break}this.active&&(this.active.isActive=!1),(this.active=a)&&(this.active.isActive=!0)},!0).linkProps("header","active",function(b){return b?b.header||a.app.mainTitle:a.app.mainTitle})}})}),define("app/typedef.class",["matreshka","balalaika"],function(a){return a.Class({"extends":a.Object,constructor:function(b){this.set(b).bindNode("sandbox",'article[data-typedef="'+b.typedef+'"]').bindNode("isShown",":sandbox",a.binders.className("shown"))}})}),define("app/typedefs.class",["globals","matreshka","balalaika","app/typedef.class"],function(a,b,c,d){return b.Class({"extends":b.Array,Model:d,constructor:function(){c("article[data-typedef]").forEach(function(a){this.push({typedef:a.dataset.typedef})},this),this.bindNode("sandbox","body").bindNode("overlay",".typedef-overlay",b.binders.className("!hide")).bindNode("overlayOpaque",":bound(overlay)",{setValue:function(a){this.style.opacity=a?.5:0}}).on("click::([data-type])",function(a){this.forEach(function(b){b.isShown=b.typedef===a.target.dataset.type})}).on("@change:isShown",function(a){a.value&&(this.shown&&(this.shown.isShown=!1),this.overlay=!0,this.overlayOpaque=!1,this.delay(function(){this.overlayOpaque=!0}),this.shown=a.self)}).on("click::overlay @click::(.close-modal)",this.close),a.app.on("keydown::sandbox",function(a){27===a.which&&this.close()},this)},close:function(){this.overlayOpaque=!1,this.once("transitionend::overlay",function(){this.overlay=!1}),this.shown&&(this.shown.isShown=!1),this.shown=null}})}),define("app/typo.class",["globals","matreshka","balalaika"],function(a,b){return b.Class({"extends":b.Object,constructor:function(){this.set({formURL:"//docs.google.com/forms/d/1lCplFvSZfwDU_zr4WsK0fSCo5ktBOnox0od_BPx40xk/formResponse",selectionName:"entry.1972481987",commentName:"entry.1777335671",pageName:"entry.339184258"}).bindNode("sandbox","form.typo").bindNode("shown",":sandbox",b.binders.className("shown")).bindNode({selection:":sandbox input.selection",comment:":sandbox textarea.comment",page:":sandbox input.page"}).bindNode({selectionName:":bound(selection)",commentName:":bound(comment)",pageName:":bound(page)"},{on:null,getValue:null,setValue:function(a){this.name=a}}).bindNode("overlay",".typo-overlay",b.binders.className("!hide")).bindNode("overlayOpaque",":bound(overlay)",{setValue:function(a){this.style.opacity=a?.5:0}}).bindNode("formURL",":sandbox",{setValue:function(a){this.action=a}}).bindNode("selection",":sandbox p.selection",b.binders.innerHTML()).on("submit::sandbox",function(){this.shown=!1}).on("change:shown",function(a){a.value?(this.overlay=!0,this.delay(function(){this.overlayOpaque=!0})):(this.overlayOpaque=!1,this.once("transitionend::overlay",function(){this.overlay=!1}))}).on("click::overlay click::(.cancel) click::(.close-modal)",function(a){this.shown=!1,a.preventDefault()}),a.app.on("keydown::sandbox",function(a){if(13===a.which&&(a.domEvent.ctrlKey||a.domEvent.metaKey)){var b=window.getSelection().toString();b&&(this.comment="",this.selection=b,this.page=location.href,this.shown=!0)}27===a.which&&(this.shown=!1)},this)}})}),define("app/search.class",["globals","matreshka","balalaika"],function(a,b){return b.Class({"extends":b.Array,Model:b.Object,itemRenderer:"<li>",constructor:function(c){var d=38,e=40,f=13;this.set(c).bindNode("sandbox","header").bindNode("container",":sandbox .search-results-dropdown").bindNode("searchMode",":sandbox",b.binders.className("search-mode")).bindNode("search",":sandbox .search").on("click::(.show-search)",function(){this.searchMode=!0,this.bound("search").focus()}).on("click::(.back)",function(){this.searchMode=!1,this.search=""}).on("@render",function(a){a.self.bindNode("header",":sandbox",b.binders.innerHTML()).bindNode("isActive",":sandbox",b.binders.className("active"))}).on("@click::sandbox",function(){this.searchMode=!1,this.search="",document.location.hash=this.active.id}).on("@mouseover::sandbox",function(a){this.forEach(function(b){b.isActive=b.eq(a.self)})}).on("keydown::search",function(a){var b;this.length&&(a.which===d||a.which===e?(b=this.indexOf(this.active),a.which===d?b-=1:a.which===e&&(b+=1),b=0>b?this.length+b:b,b%=this.length,this.forEach(function(a,c){a.isActive=c===b}),a.preventDefault()):a.which===f&&(document.location.hash=this.active.id,this.search="",this.searchMode=!1))}).on("@change:isActive",function(a){this.active=a.self.isActive?a.self:this.active}).on("change:search",function(){var b=this.search;b?(b=b.toLowerCase(),this.recreate(a.app.articles.toNative().filter(function(a){return b.toLowerCase(),~a.name.toLowerCase().indexOf(b)||~a.id.toLowerCase().indexOf(b)}).map(function(a){return{header:a.header,name:a.name,article:a,id:a.id}}).slice(0,5)),this.length&&(this[0].isActive=!0)):this.recreate()})}})}),function(a,b){var c="header",d="hidden",e=500,f=a.querySelector(c);if(!f)return!0;var g=0,h=0,i=0,j=0,k=0,l=function(a,b){return a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)},m=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},n=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},o=function(a,b){var c,d;return function(){var e=this,f=arguments,g=+new Date;c&&c+a>g?(clearTimeout(d),d=setTimeout(function(){c=g,b.apply(e,f)},a)):(c=g,b.apply(e,f))}};b.addEventListener("scroll",o(e,function(){g=a.body.offsetHeight,h=b.innerHeight,i=b.pageYOffset,k=j-i,0>=i?n(f,d):k>0&&l(f,d)?n(f,d):0>k&&(i+h>=g&&l(f,d)?n(f,d):m(f,d)),j=i}))}(document,window,0),define("lib/header-hider",function(){}),!function(){var a=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function b(a){function b(a){var b=a.charCodeAt(0);if(92!==b)return b;var c=a.charAt(1);return(b=l[c])?b:c>="0"&&"7">=c?parseInt(a.substring(1),8):"u"===c||"x"===c?parseInt(a.substring(2),16):a.charCodeAt(1)}function c(a){return 32>a?(16>a?"\\x0":"\\x")+a.toString(16):(a=String.fromCharCode(a),"\\"===a||"-"===a||"]"===a||"^"===a?"\\"+a:a)}function d(a){var d=a.substring(1,a.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),a=[],e="^"===d[0],f=["["];e&&f.push("^");for(var e=e?1:0,g=d.length;g>e;++e){var h=d[e];if(/\\[bdsw]/i.test(h))f.push(h);else{var i,h=b(h);g>e+2&&"-"===d[e+1]?(i=b(d[e+2]),e+=2):i=h,a.push([h,i]),65>i||h>122||(65>i||h>90||a.push([32|Math.max(65,h),32|Math.min(i,90)]),97>i||h>122||a.push([-33&Math.max(97,h),-33&Math.min(i,122)]))}}for(a.sort(function(a,b){return a[0]-b[0]||b[1]-a[1]}),d=[],g=[],e=0;e<a.length;++e)h=a[e],h[0]<=g[1]+1?g[1]=Math.max(g[1],h[1]):d.push(g=h);for(e=0;e<d.length;++e)h=d[e],f.push(c(h[0])),h[1]>h[0]&&(h[1]+1>h[0]&&f.push("-"),f.push(c(h[1])));return f.push("]"),f.join("")}function e(a){for(var b=a.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),e=b.length,h=[],i=0,j=0;e>i;++i){var k=b[i];"("===k?++j:"\\"===k.charAt(0)&&(k=+k.substring(1))&&(j>=k?h[k]=-1:b[i]=c(k))}for(i=1;i<h.length;++i)-1===h[i]&&(h[i]=++f);for(j=i=0;e>i;++i)k=b[i],"("===k?(++j,h[j]||(b[i]="(?:")):"\\"===k.charAt(0)&&(k=+k.substring(1))&&j>=k&&(b[i]="\\"+h[k]);for(i=0;e>i;++i)"^"===b[i]&&"^"!==b[i+1]&&(b[i]="");if(a.ignoreCase&&g)for(i=0;e>i;++i)k=b[i],a=k.charAt(0),k.length>=2&&"["===a?b[i]=d(k):"\\"!==a&&(b[i]=k.replace(/[A-Za-z]/g,function(a){return a=a.charCodeAt(0),"["+String.fromCharCode(-33&a,32|a)+"]"}));return b.join("")}for(var f=0,g=!1,h=!1,i=0,j=a.length;j>i;++i){var k=a[i];if(k.ignoreCase)h=!0;else if(/[a-z]/i.test(k.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){g=!0,h=!1;break}}for(var l={b:8,t:9,n:10,v:11,f:12,r:13},m=[],i=0,j=a.length;j>i;++i){if(k=a[i],k.global||k.multiline)throw Error(""+k);m.push("(?:"+e(k)+")")}return RegExp(m.join("|"),h?"gi":"g")}function c(a,b){function c(a){var i=a.nodeType;if(1==i){if(!d.test(a.className)){for(i=a.firstChild;i;i=i.nextSibling)c(i);i=a.nodeName.toLowerCase(),("br"===i||"li"===i)&&(e[h]="\n",g[h<<1]=f++,g[h++<<1|1]=a)}}else(3==i||4==i)&&(i=a.nodeValue,i.length&&(i=b?i.replace(/\r\n?/g,"\n"):i.replace(/[\t\n\r ]+/g," "),e[h]=i,g[h<<1]=f,f+=i.length,g[h++<<1|1]=a))}var d=/(?:^|\s)nocode(?:\s|$)/,e=[],f=0,g=[],h=0;return c(a),{a:e.join("").replace(/\n$/,""),d:g}}function d(a,b,c,d){b&&(a={a:b,e:a},c(a),d.push.apply(d,a.g))}function e(a){for(var b=void 0,c=a.firstChild;c;c=c.nextSibling)var d=c.nodeType,b=1===d?b?a:c:3===d&&v.test(c.nodeValue)?a:b;return b===a?void 0:b}function f(c,e){function f(a){for(var b=a.e,c=[b,"pln"],k=0,l=a.a.match(g)||[],m={},n=0,o=l.length;o>n;++n){var p,q=l[n],r=m[q],s=void 0;if("string"==typeof r)p=!1;else{var t=h[q.charAt(0)];if(t)s=q.match(t[1]),r=t[0];else{for(p=0;i>p;++p)if(t=e[p],s=q.match(t[1])){r=t[0];break}s||(r="pln")}!(p=r.length>=5&&"lang-"===r.substring(0,5))||s&&"string"==typeof s[1]||(p=!1,r="src"),p||(m[q]=r)}if(t=k,k+=q.length,p){p=s[1];var u=q.indexOf(p),v=u+p.length;s[2]&&(v=q.length-s[2].length,u=v-p.length),r=r.substring(5),d(b+t,q.substring(0,u),f,c),d(b+t+u,p,j(r,p),c),d(b+t+v,q.substring(v),f,c)}else c.push(b+t,r)}a.g=c}var g,h={};!function(){for(var d=c.concat(e),f=[],i={},j=0,k=d.length;k>j;++j){var l=d[j],m=l[3];if(m)for(var n=m.length;--n>=0;)h[m.charAt(n)]=l;l=l[1],m=""+l,i.hasOwnProperty(m)||(f.push(l),i[m]=a)}f.push(/[\S\s]/),g=b(f)}();var i=e.length;return f}function g(b){var c=[],d=[];c.push(b.tripleQuotedStrings?["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,a,"'\""]:b.multiLineStrings?["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,a,"'\"`"]:["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,a,"\"'"]),b.verbatimStrings&&d.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,a]);var e=b.hashComments;if(e&&(b.cStyleComments?(c.push(e>1?["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,a,"#"]:["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,a,"#"]),d.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,a])):c.push(["com",/^#[^\n\r]*/,a,"#"])),b.cStyleComments&&(d.push(["com",/^\/\/[^\n\r]*/,a]),d.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,a])),e=b.regexLiterals){var g=(e=e>1?"":"\n\r")?".":"[\\S\\s]";d.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+("/(?=[^/*"+e+"])(?:[^/\\x5B\\x5C"+e+"]|\\x5C"+g+"|\\x5B(?:[^\\x5C\\x5D"+e+"]|\\x5C"+g+")*(?:\\x5D|$))+/")+")")])}return(e=b.types)&&d.push(["typ",e]),e=(""+b.keywords).replace(/^ | $/g,""),e.length&&d.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),a]),c.push(["pln",/^\s+/,a," \r\n	 "]),e="^.[^\\s\\w.$@'\"`/\\\\]*",b.regexLiterals&&(e+="(?!s*/)"),d.push(["lit",/^@[$_a-z][\w$@]*/i,a],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,a],["pln",/^[$_a-z][\w$@]*/i,a],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,a,"0123456789"],["pln",/^\\[\S\s]?/,a],["pun",RegExp(e),a]),f(c,d)}function h(a,b,c){function d(a){var b=a.nodeType;if(1!=b||f.test(a.className)){if((3==b||4==b)&&c){var i=a.nodeValue,j=i.match(g);j&&(b=i.substring(0,j.index),a.nodeValue=b,(i=i.substring(j.index+j[0].length))&&a.parentNode.insertBefore(h.createTextNode(i),a.nextSibling),e(a),b||a.parentNode.removeChild(a))}}else if("br"===a.nodeName)e(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)d(a)}function e(a){function b(a,c){var d=c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),f=a.nextSibling;e.appendChild(d);for(var g=f;g;g=f)f=g.nextSibling,e.appendChild(g)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;for(var c,a=b(a.nextSibling,0);(c=a.parentNode)&&1===c.nodeType;)a=c;j.push(a)}for(var f=/(?:^|\s)nocode(?:\s|$)/,g=/\r\n?|\n/,h=a.ownerDocument,i=h.createElement("li");a.firstChild;)i.appendChild(a.firstChild);for(var j=[i],k=0;k<j.length;++k)d(j[k]);b===(0|b)&&j[0].setAttribute("value",b);var l=h.createElement("ol");l.className="linenums";for(var b=Math.max(0,b-1|0)||0,k=0,m=j.length;m>k;++k)i=j[k],i.className="L"+(k+b)%10,i.firstChild||i.appendChild(h.createTextNode(" ")),l.appendChild(i);a.appendChild(l)}function i(a,b){for(var c=b.length;--c>=0;){var d=b[c];x.hasOwnProperty(d)?l.console&&console.warn("cannot override language handler %s",d):x[d]=a}}function j(a,b){return a&&x.hasOwnProperty(a)||(a=/^\s*</.test(b)?"default-markup":"default-code"),x[a]}function k(a){var b=a.h;try{var d=c(a.c,a.i),e=d.a;a.a=e,a.d=d.d,a.e=0,j(b,e)(a);var f=/\bMSIE\s(\d+)/.exec(navigator.userAgent),f=f&&+f[1]<=8,b=/\n/g,g=a.a,h=g.length,d=0,i=a.d,k=i.length,e=0,m=a.g,n=m.length,o=0;m[n]=h;var p,q;for(q=p=0;n>q;)m[q]!==m[q+2]?(m[p++]=m[q++],m[p++]=m[q++]):q+=2;for(n=p,q=p=0;n>q;){for(var r=m[q],s=m[q+1],t=q+2;n>=t+2&&m[t+1]===s;)t+=2;m[p++]=r,m[p++]=s,q=t}m.length=p;var u,v=a.c;v&&(u=v.style.display,v.style.display="none");try{for(;k>e;){var w,x=i[e+2]||h,y=m[o+2]||h,t=Math.min(x,y),z=i[e+1];if(1!==z.nodeType&&(w=g.substring(d,t))){f&&(w=w.replace(b,"\r")),z.nodeValue=w;var A=z.ownerDocument,B=A.createElement("span");B.className=m[o+1];var C=z.parentNode;C.replaceChild(B,z),B.appendChild(z),x>d&&(i[e+1]=z=A.createTextNode(g.substring(t,x)),C.insertBefore(z,B.nextSibling))}d=t,d>=x&&(e+=2),d>=y&&(o+=2)}}finally{v&&(v.style.display=u)}}catch(D){l.console&&console.log(D&&D.stack||D)}}var l=window,m=["break,continue,do,else,for,if,return,while"],n=[[m,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],o=[n,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[n,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],q=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],n=[n,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],r=[m,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],s=[m,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],t=[m,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],m=[m,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],u=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,v=/\S/,w=g({keywords:[o,q,n,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",r,s,m],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),x={};i(w,["default-code"]),i(f([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),i(f([["pln",/^\s+/,a," 	\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,a,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),i(f([],[["atv",/^[\S\s]+/]]),["uq.val"]),i(g({keywords:o,hashComments:!0,cStyleComments:!0,types:u}),["c","cc","cpp","cxx","cyc","m"]),i(g({keywords:"null,true,false"}),["json"]),i(g({keywords:q,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:u}),["cs"]),i(g({keywords:p,cStyleComments:!0}),["java"]),i(g({keywords:m,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),i(g({keywords:r,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),i(g({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),i(g({keywords:s,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),i(g({keywords:n,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),i(g({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),i(g({keywords:t,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]),i(f([],[["str",/^[\S\s]+/]]),["regex"]);var y=l.PR={createSimpleLexer:f,registerLangHandler:i,sourceDecorator:g,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:l.prettyPrintOne=function(a,b,c){var d=document.createElement("div");return d.innerHTML="<pre>"+a+"</pre>",d=d.firstChild,c&&h(d,c,!0),k({h:b,j:c,c:d,i:1}),d.innerHTML},prettyPrint:l.prettyPrint=function(b,c){function d(){for(var c=l.PR_SHOULD_USE_CONTINUATION?o.now()+250:1/0;q<i.length&&o.now()<c;q++){for(var f=i[q],j=x,m=f;m=m.previousSibling;){var n=m.nodeType,y=(7===n||8===n)&&m.nodeValue;if(y?!/^\??prettify\b/.test(y):3!==n||/\S/.test(m.nodeValue))break;if(y){j={},y.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(a,b,c){j[b]=c});break}}if(m=f.className,(j!==x||s.test(m))&&!t.test(m)){for(n=!1,y=f.parentNode;y;y=y.parentNode)if(w.test(y.tagName)&&y.className&&s.test(y.className)){n=!0;break}if(!n){if(f.className+=" prettyprinted",n=j.lang,!n){var z,n=m.match(r);!n&&(z=e(f))&&v.test(z.tagName)&&(n=z.className.match(r)),n&&(n=n[1])}if(u.test(f.tagName))y=1;else var y=f.currentStyle,A=g.defaultView,y=(y=y?y.whiteSpace:A&&A.getComputedStyle?A.getComputedStyle(f,a).getPropertyValue("white-space"):0)&&"pre"===y.substring(0,3);A=j.linenums,(A="true"===A||+A)||(A=(A=m.match(/\blinenums\b(?::(\d+))?/))?A[1]&&A[1].length?+A[1]:!0:!1),A&&h(f,A,y),p={h:n,c:f,j:A,i:y},k(p)}}}q<i.length?setTimeout(d,250):"function"==typeof b&&b()}for(var f=c||document.body,g=f.ownerDocument||document,f=[f.getElementsByTagName("pre"),f.getElementsByTagName("code"),f.getElementsByTagName("xmp")],i=[],j=0;j<f.length;++j)for(var m=0,n=f[j].length;n>m;++m)i.push(f[j][m]);
var f=a,o=Date;o.now||(o={now:function(){return+new Date}});var p,q=0,r=/\blang(?:uage)?-([\w.]+)(?!\S)/,s=/\bprettyprint\b/,t=/\bprettyprinted\b/,u=/pre|xmp/i,v=/^code$/i,w=/^(?:pre|code|xmp)$/i,x={};d()}};"function"==typeof define&&define.amd&&define("google-code-prettify",[],function(){return y})}()}(),define("lib/prettify",function(){}),define("lib/embed-jsbin",[],function(){function a(a){for(var b={},c=a.split("&"),d=c.length,e=[],f=0;d>f;f++){e=c[f].split("=",2);try{e[0]=decodeURIComponent(e[0]),e[1]=decodeURIComponent(e[1])}catch(g){}void 0===b[e[0]]?b[e[0]]=e[1]:b[e[0]]+=","+e[1]}return b}function b(b){var c=document.createElement("iframe"),d=(document.createElement("div"),b.href.replace(/edit/,"embed"));c.src=d.split("&")[0],c._src=d.split("&")[0],c.className=b.className,c.id=b.id,c.style.border="1px solid #aaa";var e=a(b.search);c.style.width=e.width||"100%",c.style.minHeight=e.height||"500px",e.height&&(c.style.maxHeight=e.height),b.nextSibling?b.parentNode.insertBefore(c,b.nextSibling):b.parentNode.appendChild(c),b.classList.add("embedded");var f=function(a){a||(a=window.event),c.style.height=1*a.data.height+2+"px"};window.addEventListener?window.addEventListener("message",f,!1):window.attachEvent("onmessage",f)}{var c=(void 0===document.createElement("i").innerText?"textContent":"innerText",document.getElementsByTagName("script"));c[c.length-1]}return b}),define("app/main.class",["globals","matreshka","balalaika","app/articles.class","app/typedefs.class","app/typo.class","app/search.class","lib/header-hider","lib/prettify","lib/embed-jsbin"],function(a,b,c,d,e,f,g,h,i,j){return b.Class({"extends":b.Object,constructor:function(){a.app=this,this.bindNode("sandbox","body").bindNode("mainTitle","title",{getValue:function(){return this.innerHTML}}).set({view:localStorage.view||"all",hideTypoBadge:localStorage.hideTypoBadge,isMobile:/mobile|android/i.test(navigator.userAgent),articles:new d,typedefs:new e,typo:new f,search:new g}).bindNode("win",window).bindNode("navShown","body",b.binders.className("nav-shown")).bindNode("isMobile",":sandbox",b.binders.className("mobile")).bindNode("loading",".loader",b.binders.className("!hide")).bindNode("navOverlay",".nav-overlay",b.binders.className("!hide")).bindNode("commentsBlock",'<div id="disqus_thread"></div>').bindNode("commentsShown",":bound(commentsBlock)",b.binders.className("!hide")).bindNode("typeBadge",":sandbox .typo-badge").bindNode("hideTypoBadge",":bound(typeBadge)",b.binders.className("hide")).bindNode("hashValue",window,{on:"hashchange",getValue:function(){return location.hash.replace("#","")}}).bindNode("view","nav .view-switcher",{on:"click",getValue:function(){return this.querySelector(".checked").getAttribute("data-value")},setValue:function(a){b.$b(this.children).forEach(function(b){b.classList.toggle("checked",b.getAttribute("data-value")===a)})},initialize:function(){this.addEventListener("mousedown",function(a){a.target!==this&&b.$b(this.children).forEach(function(b){b.classList.toggle("checked",a.target===b)})})}}).bindNode("view","body",b.binders.attribute("data-view")).on("scroll::win",function(){if("all"===this.view){var a=window.pageYOffset,b=window.pageXOffset,c=this.articles.filter(function(b){return b.bound().offsetTop<a+50});c=c[c.length-1],location.hash=c?c.id:"",scrollTo(b,a)}}).on("change:view",function(){var a,b=window.pageXOffset;localStorage.view=this.view,a="all"===this.view&&this.articles.active?this.articles.active.bound().offsetTop:0,scrollTo(b,a)}).on("click::(.show-nav)",function(){this.navOverlay=!0,this.delay(function(){this.navShown=!0})}).on("click::navOverlay",function(){this.once("transitionend::navOverlay",function(){this.navOverlay=!1}),this.navShown=!1}).on('click::([href*="jsbin.com"][href*="edit"])',function(a){a.target.classList.contains("embedded")?a.target.nextSibling.classList.toggle("hide"):j(a.target),a.preventDefault()}).on("click::typeBadge(.close)",function(){localStorage.hideTypoBadge=this.hideTypoBadge=!0}),location.hash=location.hash||"home",this.loading=!1,prettyPrint()}})}),require.config({baseUrl:"js/",paths:{matreshka:"matreshka.min",balalaika:"matreshka.min"}}),define("globals",{}),require(["app/main.class"],function(a){window.app=new a}),define("app",function(){});
//# sourceMappingURL=app.map